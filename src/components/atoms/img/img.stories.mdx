import { Meta, Story, Props, Preview } from '@storybook/addon-docs/blocks';
import { withKnobs, text } from '@storybook/addon-knobs';
import styled from '@emotion/styled';

import Img from './Img.js';

import DemoImage from '../../../assets/static/dummy/demo_image.jpeg';
import DemoImageRetina from '../../../assets/static/dummy/demo_image@2x.jpeg';
import DemoImageFallback from '../../../assets/static/fallback.png';

<Meta title="Atoms/Img" component={Img} decorators={[withKnobs]} />

# Img

Image Komponente, mit Fallback-Image, wenn das Original-Bild nicht geladen werden kann.

<Preview>
  <Story name="Default MDX">
    <Img
      src={DemoImage}
      srcRetina={DemoImageRetina}
      srcOnError={DemoImageFallback}
      width={text('Width', 300)}
      height={text('Height', 200)}
      alt={text('Alt-text', 'Image description')}
    />
  </Story>
</Preview>

## Props

<Props of={Img} />

## Beispiele

**JSX:**

```javascript
<Img
  src="path/to/image.jpg"
  srcRetina="path/to/image@2x.jpg"
  srcOnError="path/to/image_FALLBACK.jpg"
  alt="Image description"
  width={200}
  height={200}
/>
```

## How to use

### Größe anpassen

Die Größe oder das Format der Bilder kann optional mit den Attributen `width` oder `height` individuell angepasst werden. Wird nichts angegeben, wird die originale Bildgröße verwendet.

<Story name="Größe anpassen">
  <StyledImgStoryContainer>
    <Img src={DemoImage} width={200} />
    <Img src={DemoImage} width={150} />
    <Img src={DemoImage} width={100} />
    <Img src={DemoImage} width={80} />
    <Img src={DemoImage} width={60} />
  </StyledImgStoryContainer>
</Story>

### Retina

Um für Retina-Displays ein alternatives Bild mit höherer Auflösung/Pixelanzahl zu laden, kann optional über das Attribute `srcRetina` ein alternatives Bild festgelegt werden.
Im Normalfall ist die hierfür bevorzugte Namenskonvention ein zusaätzliches `@2x` am Ende des Dateinamens.

```
path/to/image.jpg
path/to/image@2x.jpg
```

<Story name="Retina Auflösung">
  <StyledImgStoryContainer>
    <Img src={DemoImage} width={200} />
    <Img src={DemoImage} srcRetina={DemoImageRetina} width={200} />
  </StyledImgStoryContainer>
</Story>

### Fallback

Zusätzlich zum `src` kann ein optional ein weiteres Attribut `srcOnError` für ein individuelles Fallback-Image verwendet werden. Dieses wird dann verwendet, wenn das Originalbild nicht geladen werden kann. Sollte auch dieses Bild nicht geladen werden können, wird ein letztes Fallback-Image `/assets/static/fallback.png` verwendet.

<Story name="Fallback">
  <StyledImgStoryContainer>
    <Img src={DemoImage} srcOnError={DemoImageFallback} width={200} />
    <Img src={DemoImage} width={150} />
  </StyledImgStoryContainer>
</Story>

export const StyledImgStoryContainer = styled.div`
  img {
    margin: 0 15px 15px 0;
  }
`;
